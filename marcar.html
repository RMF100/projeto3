<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Marcar Treino â€” one2one</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:ital,wght@0,300;0,500;0,700;0,900;1,700&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet"/>
  <style>
    :root {
      --bg:          #0a0a0c;
      --bg-2:        #111116;
      --bg-3:        #18181f;
      --surface:     #1e1e27;
      --surface-2:   #252530;
      --border:      rgba(255,255,255,0.07);
      --border-2:    rgba(255,255,255,0.12);
      --border-3:    rgba(255,255,255,0.18);

      --text:        #e8e8f0;
      --text-2:      #9090a8;
      --text-3:      #5a5a70;

      --blue:        #3b82f6;
      --blue-dim:    #1d4ed8;
      --blue-glow:   rgba(59,130,246,0.25);
      --blue-subtle: rgba(59,130,246,0.08);
      --blue-hover:  rgba(59,130,246,0.15);

      --green:       #22c55e;
      --green-subtle: rgba(34,197,94,0.1);

      --red:         #ef4444;
      --red-subtle:  rgba(239,68,68,0.1);

      --ff-head: 'Barlow Condensed', sans-serif;
      --ff-body: 'DM Sans', sans-serif;
      --ease:    cubic-bezier(0.4, 0, 0.2, 1);
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body {
      font-family: var(--ff-body);
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
    }
    a { color: inherit; text-decoration: none; }
    button { font-family: inherit; cursor: pointer; border: none; }

    ::-webkit-scrollbar { width: 4px; }
    ::-webkit-scrollbar-track { background: var(--bg); }
    ::-webkit-scrollbar-thumb { background: var(--blue-dim); border-radius: 2px; }

    /* â”€â”€ TOP BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .topbar {
      position: sticky;
      top: 0;
      z-index: 100;
      background: rgba(10,10,12,0.92);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border);
      padding: 1rem 2rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
    }
    .topbar-logo {
      font-family: var(--ff-head);
      font-size: 1.5rem;
      font-weight: 900;
      letter-spacing: -0.02em;
      color: #fff;
    }
    .topbar-logo span { color: var(--blue); }
    .topbar-back {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.78rem;
      font-weight: 500;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--text-3);
      border: 1px solid var(--border);
      padding: 0.55rem 1rem;
      border-radius: 6px;
      transition: all 0.2s var(--ease);
    }
    .topbar-back:hover { border-color: var(--border-2); color: var(--text); }
    .topbar-title {
      font-size: 0.72rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--text-3);
    }

    /* â”€â”€ PAGE LAYOUT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .page-wrap {
      max-width: 1100px;
      margin: 0 auto;
      padding: 3rem 2rem 5rem;
    }

    .page-header {
      text-align: center;
      margin-bottom: 3.5rem;
    }
    .page-eyebrow {
      display: inline-flex;
      align-items: center;
      gap: 0.6rem;
      font-size: 0.68rem;
      font-weight: 500;
      letter-spacing: 0.25em;
      text-transform: uppercase;
      color: var(--blue);
      margin-bottom: 1rem;
    }
    .page-eyebrow::before, .page-eyebrow::after {
      content: '';
      width: 24px; height: 1px;
      background: var(--blue);
    }
    .page-title {
      font-family: var(--ff-head);
      font-size: clamp(2.5rem, 6vw, 5rem);
      font-weight: 900;
      text-transform: uppercase;
      letter-spacing: -0.02em;
      color: #fff;
      line-height: 0.95;
    }
    .page-title em {
      color: var(--blue);
      font-style: italic;
      font-weight: 300;
    }
    .page-desc {
      font-size: 0.9rem;
      color: var(--text-2);
      max-width: 480px;
      margin: 1.2rem auto 0;
      line-height: 1.7;
    }

    /* Progress steps */
    .progress-steps {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0;
      margin-bottom: 3rem;
    }
    .step-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
    }
    .step-num {
      width: 36px; height: 36px;
      border-radius: 50%;
      border: 2px solid var(--border-2);
      display: flex; align-items: center; justify-content: center;
      font-size: 0.8rem;
      font-weight: 500;
      color: var(--text-3);
      transition: all 0.3s var(--ease);
    }
    .step-label {
      font-size: 0.62rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--text-3);
      transition: color 0.3s;
      white-space: nowrap;
    }
    .step-item.active .step-num {
      border-color: var(--blue);
      background: var(--blue-subtle);
      color: var(--blue);
      box-shadow: 0 0 0 4px var(--blue-subtle);
    }
    .step-item.active .step-label { color: var(--blue); }
    .step-item.done .step-num {
      border-color: var(--green);
      background: var(--green-subtle);
      color: var(--green);
    }
    .step-item.done .step-label { color: var(--green); }
    .step-connector {
      width: 60px; height: 1px;
      background: var(--border-2);
      flex-shrink: 0;
      margin-bottom: 1.4rem;
      transition: background 0.3s;
    }
    .step-connector.done { background: var(--green); }

    /* â”€â”€ BOOKING GRID â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .booking-grid {
      display: grid;
      grid-template-columns: 1fr 360px;
      gap: 2rem;
      align-items: start;
    }

    /* â”€â”€ STEP PANELS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .step-panel { display: none; }
    .step-panel.active {
      display: block;
      animation: fadeUp 0.4s var(--ease) both;
    }
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(20px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    .panel-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 2rem;
      margin-bottom: 1.2rem;
    }
    .panel-card-title {
      font-family: var(--ff-head);
      font-size: 1.1rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #fff;
      margin-bottom: 0.4rem;
    }
    .panel-card-sub {
      font-size: 0.8rem;
      color: var(--text-3);
      margin-bottom: 1.5rem;
    }

    /* Step 1 â€” Tipo de aula */
    .tipo-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.8rem;
    }
    .tipo-card {
      padding: 1.2rem;
      background: var(--bg-3);
      border: 2px solid var(--border);
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s var(--ease);
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
    }
    .tipo-card:hover { border-color: var(--border-2); background: var(--surface-2); }
    .tipo-card.selected {
      border-color: var(--blue);
      background: var(--blue-subtle);
    }
    .tipo-card-icon { font-size: 1.4rem; }
    .tipo-card-name {
      font-family: var(--ff-head);
      font-size: 0.95rem;
      font-weight: 700;
      text-transform: uppercase;
      color: #fff;
    }
    .tipo-card-dur {
      font-size: 0.72rem;
      color: var(--text-3);
    }
    .tipo-card.selected .tipo-card-name { color: var(--blue); }

    /* Step 2 â€” CalendÃ¡rio */
    .cal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 1.2rem;
    }
    .cal-month-label {
      font-family: var(--ff-head);
      font-size: 1rem;
      font-weight: 700;
      text-transform: uppercase;
      color: #fff;
    }
    .cal-nav-btn {
      width: 32px; height: 32px;
      background: var(--bg-3);
      border: 1px solid var(--border-2);
      border-radius: 6px;
      color: var(--text-2);
      font-size: 0.9rem;
      transition: all 0.2s;
      cursor: pointer;
      display: flex; align-items: center; justify-content: center;
    }
    .cal-nav-btn:hover { border-color: var(--blue); color: var(--blue); background: var(--blue-subtle); }

    .full-cal {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 4px;
    }
    .fc-label {
      font-size: 0.62rem;
      text-align: center;
      color: var(--text-3);
      letter-spacing: 0.1em;
      text-transform: uppercase;
      padding: 0.4rem 0;
      font-weight: 500;
    }
    .fc-day {
      aspect-ratio: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
      color: var(--text-3);
      border-radius: 6px;
      border: 1px solid transparent;
      transition: all 0.2s;
      cursor: default;
    }
    .fc-day.available {
      color: var(--text);
      cursor: pointer;
      border-color: var(--border);
      background: var(--bg-3);
    }
    .fc-day.available:hover { border-color: var(--blue); background: var(--blue-subtle); color: var(--blue); }
    .fc-day.selected { background: var(--blue); color: #fff; border-color: var(--blue); font-weight: 600; }
    .fc-day.today { border-color: var(--blue); color: var(--blue); }
    .fc-day.today.selected { background: var(--blue); color: #fff; }
    .fc-day.past { opacity: 0.25; }
    .fc-day.full { opacity: 0.3; text-decoration: line-through; }

    /* Time slots */
    .slots-wrap {
      margin-top: 1.5rem;
      display: none;
    }
    .slots-wrap.show { display: block; animation: fadeUp 0.3s var(--ease) both; }
    .slots-label {
      font-size: 0.68rem;
      font-weight: 500;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--text-3);
      margin-bottom: 0.8rem;
    }
    .slots-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 0.5rem;
    }
    .slot-btn {
      padding: 0.6rem 0.4rem;
      background: var(--bg-3);
      border: 1px solid var(--border);
      border-radius: 6px;
      font-size: 0.78rem;
      color: var(--text-2);
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
    }
    .slot-btn:hover { border-color: var(--blue); color: var(--blue); background: var(--blue-subtle); }
    .slot-btn.selected { background: var(--blue); border-color: var(--blue); color: #fff; font-weight: 600; }
    .slot-btn.taken { opacity: 0.3; cursor: not-allowed; text-decoration: line-through; }

    /* Step 3 â€” Dados pessoais */
    .form-fields {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
    .form-group {
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
    }
    .form-group label {
      font-size: 0.68rem;
      font-weight: 500;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: var(--text-3);
    }
    .form-group input,
    .form-group select,
    .form-group textarea {
      padding: 0.8rem 1rem;
      background: var(--bg-3);
      border: 1.5px solid var(--border-2);
      border-radius: 6px;
      font-family: var(--ff-body);
      font-size: 0.85rem;
      color: var(--text);
      outline: none;
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    .form-group select { cursor: pointer; }
    .form-group select option { background: var(--surface); }
    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      border-color: var(--blue);
      box-shadow: 0 0 0 3px var(--blue-subtle);
    }
    .form-group input.error,
    .form-group select.error,
    .form-group textarea.error {
      border-color: var(--red);
      box-shadow: 0 0 0 3px var(--red-subtle);
    }
    .form-group input::placeholder,
    .form-group textarea::placeholder { color: var(--text-3); }
    .form-group textarea { resize: vertical; min-height: 80px; }
    .field-error {
      font-size: 0.72rem;
      color: var(--red);
      display: none;
    }
    .field-error.show { display: block; }

    /* Google Calendar consent */
    .gcal-consent {
      display: flex;
      align-items: flex-start;
      gap: 0.8rem;
      padding: 1rem;
      background: var(--blue-subtle);
      border: 1px solid rgba(59,130,246,0.25);
      border-radius: 8px;
      margin-top: 0.5rem;
      cursor: pointer;
    }
    .gcal-checkbox {
      width: 18px; height: 18px;
      border: 2px solid var(--blue);
      border-radius: 4px;
      background: transparent;
      flex-shrink: 0;
      display: flex; align-items: center; justify-content: center;
      transition: all 0.2s;
      margin-top: 1px;
    }
    .gcal-checkbox.checked {
      background: var(--blue);
    }
    .gcal-checkbox.checked::after {
      content: 'âœ“';
      color: #fff;
      font-size: 0.72rem;
    }
    .gcal-consent-text {
      font-size: 0.8rem;
      color: var(--text-2);
      line-height: 1.5;
    }
    .gcal-consent-text strong { color: var(--blue); }

    /* â”€â”€ NAV BUTTONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .step-nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      margin-top: 1.5rem;
    }
    .btn-prev {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.85rem 1.6rem;
      border: 1px solid var(--border-2);
      border-radius: 6px;
      font-size: 0.78rem;
      font-weight: 500;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--text-2);
      background: transparent;
      transition: all 0.2s;
    }
    .btn-prev:hover { border-color: var(--border-3); color: var(--text); }
    .btn-next {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.85rem 2rem;
      background: var(--blue);
      border: none;
      border-radius: 6px;
      font-family: var(--ff-head);
      font-size: 0.95rem;
      font-weight: 700;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: #fff;
      cursor: pointer;
      transition: all 0.25s var(--ease);
      position: relative; overflow: hidden;
      margin-left: auto;
    }
    .btn-next:disabled {
      background: var(--surface-2);
      color: var(--text-3);
      cursor: not-allowed;
      transform: none !important;
      box-shadow: none !important;
    }
    .btn-next:not(:disabled):hover {
      background: #2563eb;
      transform: translateY(-1px);
      box-shadow: 0 8px 24px var(--blue-glow);
    }

    .btn-spinner {
      display: inline-block;
      width: 14px; height: 14px;
      border: 2px solid rgba(255,255,255,0.3);
      border-top-color: #fff;
      border-radius: 50%;
      animation: spin 0.7s linear infinite;
      vertical-align: middle;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* â”€â”€ SUMMARY SIDEBAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .summary-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.8rem;
      position: sticky;
      top: 90px;
    }
    .summary-card::before {
      content: '';
      display: block;
      width: 100%;
      height: 2px;
      background: linear-gradient(90deg, var(--blue), #60a5fa);
      border-radius: 2px 2px 0 0;
      position: absolute;
      top: 0; left: 0;
    }
    .summary-title {
      font-family: var(--ff-head);
      font-size: 0.85rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: var(--text-3);
      margin-bottom: 1.5rem;
    }
    .summary-rows {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    .summary-row {
      display: flex;
      flex-direction: column;
      gap: 0.2rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--border);
    }
    .summary-row:last-child { border-bottom: none; padding-bottom: 0; }
    .summary-row-label {
      font-size: 0.65rem;
      font-weight: 500;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--text-3);
    }
    .summary-row-value {
      font-size: 0.88rem;
      color: var(--text);
    }
    .summary-row-value.empty {
      color: var(--text-3);
      font-style: italic;
    }

    .gcal-badge {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      margin-top: 1.5rem;
      padding: 0.8rem;
      background: var(--blue-subtle);
      border: 1px solid rgba(59,130,246,0.2);
      border-radius: 8px;
      font-size: 0.75rem;
      color: var(--blue);
    }

    /* â”€â”€ SUCCESS PAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .success-page {
      display: none;
      text-align: center;
      padding: 4rem 1rem;
      max-width: 600px;
      margin: 0 auto;
    }
    .success-page.show {
      display: block;
      animation: fadeUp 0.5s var(--ease) both;
    }
    .success-icon {
      width: 80px; height: 80px;
      background: var(--green-subtle);
      border: 2px solid var(--green);
      border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 2.2rem;
      margin: 0 auto 2rem;
      animation: scaleIn 0.5s 0.2s var(--ease) both;
    }
    @keyframes scaleIn {
      from { transform: scale(0.5); opacity: 0; }
      to   { transform: scale(1); opacity: 1; }
    }
    .success-title {
      font-family: var(--ff-head);
      font-size: clamp(2rem, 5vw, 3.5rem);
      font-weight: 900;
      text-transform: uppercase;
      color: #fff;
      line-height: 1;
    }
    .success-title span { color: var(--green); }
    .success-desc {
      font-size: 0.92rem;
      color: var(--text-2);
      line-height: 1.7;
      margin-top: 1.2rem;
    }

    .success-details {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.8rem;
      margin: 2rem auto;
      text-align: left;
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }
    .sd-row {
      display: flex;
      align-items: center;
      gap: 0.8rem;
      font-size: 0.85rem;
      color: var(--text-2);
    }
    .sd-icon { color: var(--blue); width: 20px; text-align: center; flex-shrink: 0; }

    .gcal-add-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.7rem;
      padding: 1rem 2rem;
      background: #fff;
      color: #1a1a1a;
      border-radius: 6px;
      font-family: var(--ff-head);
      font-size: 0.95rem;
      font-weight: 700;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      text-decoration: none;
      margin-top: 0.5rem;
      transition: all 0.25s;
    }
    .gcal-add-btn:hover {
      background: #f0f0f0;
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.3);
    }
    .gcal-add-btn .g-icon {
      width: 20px; height: 20px;
      background: linear-gradient(135deg, #4285F4, #34A853, #FBBC05, #EA4335);
      border-radius: 4px;
      display: flex; align-items: center; justify-content: center;
      font-size: 0.7rem;
      color: #fff;
    }

    .success-back {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      margin-top: 1.5rem;
      font-size: 0.78rem;
      color: var(--text-3);
      letter-spacing: 0.1em;
      text-transform: uppercase;
      transition: color 0.2s;
    }
    .success-back:hover { color: var(--blue); }

    /* â”€â”€ ERROR GLOBAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .form-error-global {
      background: var(--red-subtle);
      border: 1px solid rgba(239,68,68,0.3);
      border-radius: 6px;
      padding: 0.75rem 1rem;
      font-size: 0.8rem;
      color: var(--red);
      margin-bottom: 1rem;
      display: none;
    }
    .form-error-global.show { display: block; }

    /* â”€â”€ RESPONSIVE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    @media (max-width: 800px) {
      .booking-grid { grid-template-columns: 1fr; }
      .summary-card { position: static; order: -1; }
      .tipo-grid { grid-template-columns: 1fr; }
      .slots-grid { grid-template-columns: repeat(3, 1fr); }
      .form-row { grid-template-columns: 1fr; }
    }
    @media (max-width: 480px) {
      .topbar { padding: 0.8rem 1rem; }
      .page-wrap { padding: 2rem 1rem 4rem; }
      .slots-grid { grid-template-columns: repeat(2, 1fr); }
      .progress-steps { gap: 0; }
      .step-connector { width: 30px; }
    }
  </style>
</head>
<body>

  <!-- TOP BAR -->
  <div class="topbar">
  <a href="index.html" class="topbar-logo">one<span>2</span>one</a>
  <span class="topbar-title">MarcaÃ§Ã£o de Aula</span>
  <a href="index.html" class="topbar-back">â† Voltar</a>
  </div>

  <!-- PAGE CONTENT -->
  <div class="page-wrap">

    <!-- Header -->
    <div class="page-header">
      <div class="page-eyebrow">Reserva de sessÃ£o</div>
      <h1 class="page-title">MARQUE O SEU<br><em>TREINO</em></h1>
      <p class="page-desc">Escolha o tipo de aula, selecione a data e hora disponÃ­vel e confirme os seus dados. O evento Ã© automaticamente adicionado ao Google Calendar.</p>
    </div>

    <!-- Progress -->
    <div class="progress-steps" id="progressSteps">
      <div class="step-item active" id="si-1">
        <div class="step-num">1</div>
        <div class="step-label">Tipo de Aula</div>
      </div>
      <div class="step-connector" id="sc-1"></div>
      <div class="step-item" id="si-2">
        <div class="step-num">2</div>
        <div class="step-label">Data & Hora</div>
      </div>
      <div class="step-connector" id="sc-2"></div>
      <div class="step-item" id="si-3">
        <div class="step-num">3</div>
        <div class="step-label">Os seus dados</div>
      </div>
    </div>

    <!-- SUCCESS PAGE -->
    <div class="success-page" id="successPage">
      <div class="success-icon">âœ“</div>
      <h2 class="success-title">RESERVA<br><span>CONFIRMADA</span></h2>
      <p class="success-desc">O seu treino foi marcado com sucesso! ReceberÃ¡ uma confirmaÃ§Ã£o por email em breve.</p>
      <div class="success-details" id="successDetails"></div>
      <a href="#" id="gcalBtn" class="gcal-add-btn" target="_blank" rel="noopener">
        <span class="g-icon">G</span>
        Adicionar ao Google Calendar
      </a>
      <br>
      <a href="index.html" class="success-back">â† Voltar ao site</a>
    </div>

    <!-- BOOKING GRID -->
    <div class="booking-grid" id="bookingGrid">

      <!-- LEFT: Steps -->
      <div class="steps-wrap">

        <!-- STEP 1: Tipo de Aula -->
        <div class="step-panel active" id="panel-1">
          <div class="panel-card">
            <div class="panel-card-title">Escolha o tipo de aula</div>
            <div class="panel-card-sub">Selecione a modalidade que melhor se adapta aos seus objectivos.</div>
            <div class="tipo-grid">
              <div class="tipo-card" data-tipo="Personal Training" data-dur="60 min" onclick="selectTipo(this)">
                <div class="tipo-card-icon">ğŸ‹ï¸</div>
                <div class="tipo-card-name">Personal Training</div>
                <div class="tipo-card-dur">60 min Â· Individual</div>
              </div>
              <div class="tipo-card" data-tipo="Pilates Privado" data-dur="50 min" onclick="selectTipo(this)">
                <div class="tipo-card-icon">ğŸ§˜</div>
                <div class="tipo-card-name">Pilates Privado</div>
                <div class="tipo-card-dur">50 min Â· Individual</div>
              </div>
              <div class="tipo-card" data-tipo="Treino Funcional" data-dur="45 min" onclick="selectTipo(this)">
                <div class="tipo-card-icon">ğŸƒ</div>
                <div class="tipo-card-name">Treino Funcional</div>
                <div class="tipo-card-dur">45 min Â· Individual</div>
              </div>
              <div class="tipo-card" data-tipo="Treino em Duo" data-dur="60 min" onclick="selectTipo(this)">
                <div class="tipo-card-icon">ğŸ‘¥</div>
                <div class="tipo-card-name">Treino em Duo</div>
                <div class="tipo-card-dur">60 min Â· 2 pessoas</div>
              </div>
              <div class="tipo-card" data-tipo="Consultoria Nutricional" data-dur="45 min" onclick="selectTipo(this)">
                <div class="tipo-card-icon">ğŸ¥—</div>
                <div class="tipo-card-name">Consultoria Nutricional</div>
                <div class="tipo-card-dur">45 min Â· Individual</div>
              </div>
              <div class="tipo-card" data-tipo="Recovery & Bem-estar" data-dur="60 min" onclick="selectTipo(this)">
                <div class="tipo-card-icon">ğŸ’†</div>
                <div class="tipo-card-name">Recovery</div>
                <div class="tipo-card-dur">60 min Â· Individual</div>
              </div>
            </div>
          </div>
          <div class="step-nav">
            <button class="btn-next" id="next1" disabled onclick="goToStep(2)">
              PrÃ³ximo: Escolher Data â†’
            </button>
          </div>
        </div>

        <!-- STEP 2: Data e Hora -->
        <div class="step-panel" id="panel-2">
          <div class="panel-card">
            <div class="panel-card-title">Escolha a data</div>
            <div class="panel-card-sub">Os dias destacados tÃªm slots disponÃ­veis.</div>
            <div class="cal-header">
              <button class="cal-nav-btn" onclick="prevMonth()">â€¹</button>
              <div class="cal-month-label" id="calMonthLabel"></div>
              <button class="cal-nav-btn" onclick="nextMonth()">â€º</button>
            </div>
            <div class="full-cal" id="fullCal"></div>
            <div class="slots-wrap" id="slotsWrap">
              <div class="slots-label" id="slotsDateLabel">HorÃ¡rios disponÃ­veis</div>
              <div class="slots-grid" id="slotsGrid"></div>
            </div>
          </div>
          <div class="step-nav">
            <button class="btn-prev" onclick="goToStep(1)">â† Anterior</button>
            <button class="btn-next" id="next2" disabled onclick="goToStep(3)">
              PrÃ³ximo: Os seus dados â†’
            </button>
          </div>
        </div>

        <!-- STEP 3: Dados pessoais -->
        <div class="step-panel" id="panel-3">
          <div class="panel-card">
            <div class="panel-card-title">Os seus dados</div>
            <div class="panel-card-sub">Preencha os campos para confirmar a sua reserva.</div>
            <div class="form-error-global" id="formErr">âš ï¸ Por favor preencha todos os campos obrigatÃ³rios.</div>
            <div class="form-fields">
              <div class="form-row">
                <div class="form-group">
                  <label>Nome *</label>
                  <input type="text" id="f-name" placeholder="O seu nome completo"/>
                  <span class="field-error" id="e-name">Campo obrigatÃ³rio</span>
                </div>
                <div class="form-group">
                  <label>Telefone *</label>
                  <input type="tel" id="f-phone" placeholder="+351 9XX XXX XXX"/>
                  <span class="field-error" id="e-phone">Campo obrigatÃ³rio</span>
                </div>
              </div>
              <div class="form-group">
                <label>Email *</label>
                <input type="email" id="f-email" placeholder="o.seu@email.pt"/>
                <span class="field-error" id="e-email">Email invÃ¡lido</span>
              </div>
              <div class="form-group">
                <label>Notas adicionais</label>
                <textarea id="f-notes" placeholder="LesÃµes, objectivos, preferÃªncias de coach..."></textarea>
              </div>

              <!-- Google Calendar consent -->
              <div class="gcal-consent" onclick="toggleGcal()">
                <div class="gcal-checkbox" id="gcalCheck"></div>
                <div class="gcal-consent-text">
                  <strong>ğŸ“… Adicionar ao Google Calendar</strong><br>
                  ApÃ³s a confirmaÃ§Ã£o, pode adicionar este evento ao seu Google Calendar com um clique.
                </div>
              </div>
            </div>
          </div>
          <div class="step-nav">
            <button class="btn-prev" onclick="goToStep(2)">â† Anterior</button>
            <button class="btn-next" id="next3" onclick="submitBooking()">
              Confirmar Reserva âœ“
            </button>
          </div>
        </div>

      </div><!-- /steps-wrap -->

      <!-- RIGHT: Summary -->
      <div class="summary-card">
        <div class="summary-title">Resumo da reserva</div>
        <div class="summary-rows">
          <div class="summary-row">
            <div class="summary-row-label">Tipo de aula</div>
            <div class="summary-row-value empty" id="s-tipo">Ainda nÃ£o selecionado</div>
          </div>
          <div class="summary-row">
            <div class="summary-row-label">DuraÃ§Ã£o</div>
            <div class="summary-row-value empty" id="s-dur">â€”</div>
          </div>
          <div class="summary-row">
            <div class="summary-row-label">Data</div>
            <div class="summary-row-value empty" id="s-date">Ainda nÃ£o selecionado</div>
          </div>
          <div class="summary-row">
            <div class="summary-row-label">Hora</div>
            <div class="summary-row-value empty" id="s-time">Ainda nÃ£o selecionado</div>
          </div>
          <div class="summary-row">
            <div class="summary-row-label">Local</div>
            <div class="summary-row-value">one2one Â· Lisboa</div>
          </div>
        </div>
        <div class="gcal-badge">
          <span>ğŸ“…</span>
          <span>Sincroniza com<br>Google Calendar</span>
        </div>
      </div>

    </div><!-- /booking-grid -->

  </div><!-- /page-wrap -->

  <script>
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       STATE
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    const state = {
      tipo: null, tipoDur: null,
      date: null, time: null,
      gcalConsent: false,
      currentStep: 1,
      calYear: 2026, calMonth: 1, // Feb = 1 (0-indexed)
    };

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       STEP NAVIGATION
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    function goToStep(n) {
      document.getElementById('panel-' + state.currentStep).classList.remove('active');
      state.currentStep = n;
      document.getElementById('panel-' + n).classList.add('active');
      updateProgressUI();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function updateProgressUI() {
      for (let i = 1; i <= 3; i++) {
        const item = document.getElementById('si-' + i);
        item.classList.remove('active', 'done');
        if (i < state.currentStep) item.classList.add('done');
        else if (i === state.currentStep) item.classList.add('active');
        // update step-num text
        item.querySelector('.step-num').textContent = i < state.currentStep ? 'âœ“' : i;
      }
      for (let i = 1; i <= 2; i++) {
        const c = document.getElementById('sc-' + i);
        c.classList.toggle('done', i < state.currentStep);
      }
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       STEP 1 â€” TIPO DE AULA
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    function selectTipo(el) {
      document.querySelectorAll('.tipo-card').forEach(c => c.classList.remove('selected'));
      el.classList.add('selected');
      state.tipo = el.dataset.tipo;
      state.tipoDur = el.dataset.dur;
      document.getElementById('next1').disabled = false;
      updateSummary();
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       STEP 2 â€” CALENDÃRIO
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    const MONTHS = ['Janeiro','Fevereiro','MarÃ§o','Abril','Maio','Junho','Julho','Agosto','Setembro','Outubro','Novembro','Dezembro'];
    const DAYS_PT = ['D','S','T','Q','Q','S','S'];

    // Available days pattern (demo: Monâ€“Sat have slots, Sundays = closed)
    function hasSlots(year, month, day) {
      const d = new Date(year, month, day);
      const wd = d.getDay(); // 0=Sun
      return wd !== 0 && day >= 14; // from today, Mon-Sat
    }
    function isFull(year, month, day) {
      // simulate some full days
      return [20, 23, 27].includes(day) && month === 1;
    }

    function buildCalendar() {
      const { calYear: y, calMonth: m } = state;
      document.getElementById('calMonthLabel').textContent = MONTHS[m] + ' ' + y;
      const wrap = document.getElementById('fullCal');
      wrap.innerHTML = '';

      DAYS_PT.forEach(d => {
        const el = document.createElement('div');
        el.className = 'fc-label';
        el.textContent = d;
        wrap.appendChild(el);
      });

      const firstDay = new Date(y, m, 1).getDay();
      const daysInMonth = new Date(y, m + 1, 0).getDate();
      const today = new Date(2026, 1, 13); // Feb 13, 2026

      for (let i = 0; i < firstDay; i++) wrap.appendChild(document.createElement('div'));

      for (let d = 1; d <= daysInMonth; d++) {
        const el = document.createElement('div');
        el.className = 'fc-day';
        el.textContent = d;
        const thisDate = new Date(y, m, d);

        if (thisDate < today) {
          el.classList.add('past');
        } else if (isFull(y, m, d)) {
          el.classList.add('full');
        } else if (hasSlots(y, m, d)) {
          el.classList.add('available');
          el.onclick = () => selectDate(d, el);
        }

        if (thisDate.toDateString() === today.toDateString()) el.classList.add('today');
        wrap.appendChild(el);
      }

      // restore selection if same month
      if (state.date) {
        const parts = state.date.split('/');
        if (parseInt(parts[1]) - 1 === m && parseInt(parts[2]) === y) {
          const dayNum = parseInt(parts[0]);
          document.querySelectorAll('.fc-day.available').forEach(el => {
            if (parseInt(el.textContent) === dayNum) el.classList.add('selected');
          });
          buildSlots();
        }
      }
    }

    function prevMonth() {
      if (state.calMonth === 0) { state.calMonth = 11; state.calYear--; }
      else state.calMonth--;
      buildCalendar();
    }
    function nextMonth() {
      if (state.calMonth === 11) { state.calMonth = 0; state.calYear++; }
      else state.calMonth++;
      buildCalendar();
    }

    function selectDate(day, el) {
      document.querySelectorAll('.fc-day').forEach(d => d.classList.remove('selected'));
      el.classList.add('selected');
      const m = String(state.calMonth + 1).padStart(2,'0');
      state.date = `${day}/${m}/${state.calYear}`;
      state.time = null;
      document.getElementById('next2').disabled = true;
      buildSlots();
      updateSummary();
    }

    const SLOTS_BY_DAY = {
      1: ['09:00','10:00','11:00','14:00','15:00','16:00','17:00','18:00','19:00','20:00'],
      2: ['07:00','08:00','09:00','10:00','14:00','15:00','17:00','18:00','19:00'],
      3: ['09:00','10:00','11:00','12:00','14:00','15:00','16:00','18:00','19:00','20:00'],
      4: ['07:00','08:00','09:00','11:00','14:00','16:00','17:00','18:00','19:00'],
      5: ['09:00','10:00','11:00','14:00','15:00','17:00','18:00','19:00','20:00'],
      6: ['09:00','10:00','11:00','12:00','13:00'],
      0: [],
    };
    const TAKEN = ['10:00','15:00','18:00'];

    function buildSlots() {
      const wrap = document.getElementById('slotsWrap');
      const grid = document.getElementById('slotsGrid');
      const label = document.getElementById('slotsDateLabel');
      if (!state.date) { wrap.classList.remove('show'); return; }

      const parts = state.date.split('/');
      const wd = new Date(parseInt(parts[2]), parseInt(parts[1])-1, parseInt(parts[0])).getDay();
      const slots = SLOTS_BY_DAY[wd] || [];

      label.textContent = `HorÃ¡rios â€” ${state.date}`;
      grid.innerHTML = '';

      slots.forEach(t => {
        const btn = document.createElement('button');
        btn.className = 'slot-btn';
        btn.textContent = t;
        if (TAKEN.includes(t)) {
          btn.classList.add('taken');
          btn.disabled = true;
        } else {
          btn.onclick = () => selectSlot(t, btn);
        }
        if (state.time === t) btn.classList.add('selected');
        grid.appendChild(btn);
      });

      wrap.classList.add('show');
    }

    function selectSlot(time, el) {
      document.querySelectorAll('.slot-btn').forEach(b => b.classList.remove('selected'));
      el.classList.add('selected');
      state.time = time;
      document.getElementById('next2').disabled = false;
      updateSummary();
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       GOOGLE CALENDAR CONSENT
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    function toggleGcal() {
      state.gcalConsent = !state.gcalConsent;
      document.getElementById('gcalCheck').classList.toggle('checked', state.gcalConsent);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SUMMARY UPDATE
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    function updateSummary() {
      const set = (id, val) => {
        const el = document.getElementById(id);
        if (val) { el.textContent = val; el.classList.remove('empty'); }
        else      { el.textContent = 'â€”'; el.classList.add('empty'); }
      };
      set('s-tipo', state.tipo);
      set('s-dur',  state.tipoDur);
      set('s-date', state.date);
      set('s-time', state.time);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SUBMIT
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    function submitBooking() {
      const name  = document.getElementById('f-name');
      const email = document.getElementById('f-email');
      const phone = document.getElementById('f-phone');
      let valid = true;

      [name, email, phone].forEach(f => f.classList.remove('error'));
      ['e-name','e-email','e-phone'].forEach(id => document.getElementById(id).classList.remove('show'));
      document.getElementById('formErr').classList.remove('show');

      if (!name.value.trim()) { name.classList.add('error'); document.getElementById('e-name').classList.add('show'); valid = false; }
      const emailRe = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!email.value.trim() || !emailRe.test(email.value)) { email.classList.add('error'); document.getElementById('e-email').classList.add('show'); valid = false; }
      if (!phone.value.trim()) { phone.classList.add('error'); document.getElementById('e-phone').classList.add('show'); valid = false; }

      if (!valid) { document.getElementById('formErr').classList.add('show'); return; }

      // Loading state
      const btn = document.getElementById('next3');
      btn.innerHTML = '<span class="btn-spinner"></span> A confirmarâ€¦';
      btn.disabled = true;

      // Simulate async (replace with real API call / EmailJS here)
      setTimeout(() => {
        showSuccess(name.value.trim());
      }, 1800);
    }

    function showSuccess(name) {
      document.getElementById('bookingGrid').style.display = 'none';
      document.getElementById('progressSteps').style.display = 'none';
      document.querySelector('.page-header').style.display = 'none';

      const sp = document.getElementById('successPage');
      sp.classList.add('show');

      // Fill details
      const det = document.getElementById('successDetails');
      det.innerHTML = `
        <div class="sd-row"><span class="sd-icon">ğŸ‹ï¸</span><span>${state.tipo}</span></div>
        <div class="sd-row"><span class="sd-icon">ğŸ“…</span><span>${state.date}</span></div>
        <div class="sd-row"><span class="sd-icon">ğŸ•</span><span>${state.time}</span></div>
        <div class="sd-row"><span class="sd-icon">â±</span><span>${state.tipoDur}</span></div>
        <div class="sd-row"><span class="sd-icon">ğŸ“</span><span>one2one Â· Lisboa</span></div>
      `;

      // Build Google Calendar link
      const gcalLink = buildGcalLink();
      document.getElementById('gcalBtn').href = gcalLink;
    }

    function buildGcalLink() {
      if (!state.date || !state.time) return '#';

      const parts = state.date.split('/');
      const day   = parts[0].padStart(2,'0');
      const month = parts[1].padStart(2,'0');
      const year  = parts[2];
      const [h, m] = state.time.split(':');

      // Start datetime
      const startDt = `${year}${month}${day}T${h.padStart(2,'0')}${m}00`;

      // End datetime (add duration in minutes)
      const durMins = parseInt(state.tipoDur) || 60;
      const startDate = new Date(parseInt(year), parseInt(month)-1, parseInt(day), parseInt(h), parseInt(m));
      const endDate = new Date(startDate.getTime() + durMins * 60000);
      const ey = endDate.getFullYear();
      const em = String(endDate.getMonth()+1).padStart(2,'0');
      const ed = String(endDate.getDate()).padStart(2,'0');
      const eh = String(endDate.getHours()).padStart(2,'0');
      const emin = String(endDate.getMinutes()).padStart(2,'0');
      const endDt = `${ey}${em}${ed}T${eh}${emin}00`;

      const title = encodeURIComponent(`one2one â€” ${state.tipo}`);
      const details = encodeURIComponent(`Treino marcado no one2one GinÃ¡sio Privado, Lisboa.\nModalidade: ${state.tipo}\nDuraÃ§Ã£o: ${state.tipoDur}`);
      const location = encodeURIComponent('one2one GinÃ¡sio Privado, Lisboa, Portugal');

      return `https://www.google.com/calendar/render?action=TEMPLATE&text=${title}&dates=${startDt}/${endDt}&details=${details}&location=${location}`;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       INIT
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    buildCalendar();
    updateProgressUI();
    updateSummary();
  </script>
</body>
</html>
